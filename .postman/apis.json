{
  "info": {
    "name": "Praychain API",
    "description": "Complete API collection for Praychain - Prayer transcription and charity token system",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "3.0.0"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "test_user_123",
      "type": "string"
    },
    {
      "key": "prayerTranscriptionId",
      "value": "",
      "type": "string"
    },
    {
      "key": "captchaTranscriptionId",
      "value": "",
      "type": "string"
    },
    {
      "key": "analysisId",
      "value": "",
      "type": "string"
    },
    {
      "key": "charityId",
      "value": "charity_001",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "item": [
        {
          "name": "Root",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/"
          }
        },
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/health"
          }
        },
        {
          "name": "API Health Check",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/health"
          }
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Create User",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"wallet_address\": \"0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb\"\n}"
            },
            "url": "{{baseUrl}}/api/users"
          }
        },
        {
          "name": "Get User by Email",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/users/by-email/user@example.com"
          }
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/users/{{userId}}"
          }
        },
        {
          "name": "Update Wallet Address",
          "request": {
            "method": "PATCH",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"wallet_address\": \"0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb\"\n}"
            },
            "url": "{{baseUrl}}/api/users/{{userId}}/wallet"
          }
        },
        {
          "name": "Add Tokens to User",
          "request": {
            "method": "PATCH",
            "url": "{{baseUrl}}/api/users/{{userId}}/add-tokens?tokens=100"
          }
        }
      ]
    },
    {
      "name": "Transcription",
      "item": [
        {
          "name": "Transcribe Audio (EN)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('prayerTranscriptionId', jsonData.transcription.id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "body": {
              "mode": "formdata",
              "formdata": [
                {"key": "file", "type": "file", "src": "/path/to/audio.mp3"},
                {"key": "audio_type", "value": "prayer", "type": "text"},
                {"key": "lang", "value": "en", "type": "text"}
              ]
            },
            "url": "{{baseUrl}}/api/transcribe"
          }
        },
        {
          "name": "Transcribe Audio (PL)",
          "request": {
            "method": "POST",
            "body": {
              "mode": "formdata",
              "formdata": [
                {"key": "file", "type": "file", "src": "/path/to/audio.mp3"},
                {"key": "audio_type", "value": "prayer", "type": "text"},
                {"key": "lang", "value": "pl", "type": "text"}
              ]
            },
            "url": "{{baseUrl}}/api/transcribe"
          }
        },
        {
          "name": "Transcribe Audio (ES)",
          "request": {
            "method": "POST",
            "body": {
              "mode": "formdata",
              "formdata": [
                {"key": "file", "type": "file", "src": "/path/to/audio.mp3"},
                {"key": "audio_type", "value": "prayer", "type": "text"},
                {"key": "lang", "value": "es", "type": "text"}
              ]
            },
            "url": "{{baseUrl}}/api/transcribe"
          }
        },
        {
          "name": "Transcribe Audio (Auto-detect)",
          "request": {
            "method": "POST",
            "body": {
              "mode": "formdata",
              "formdata": [
                {"key": "file", "type": "file", "src": "/path/to/audio.mp3"},
                {"key": "audio_type", "value": "prayer", "type": "text"},
                {"key": "lang", "value": "auto", "type": "text"}
              ]
            },
            "url": "{{baseUrl}}/api/transcribe"
          }
        },
        {
          "name": "Get Transcription by ID",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/transcriptions/{{prayerTranscriptionId}}"
          }
        },
        {
          "name": "List Transcriptions",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/transcriptions?skip=0&limit=10"
          }
        },
        {
          "name": "Change Whisper Model",
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/api/change-model?model_name=base"
          }
        }
      ]
    },
    {
      "name": "Analysis",
      "item": [
        {
          "name": "Analyze with Reference Text",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('analysisId', 'analysis_' + jsonData.transcription_id);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "url": "{{baseUrl}}/api/analysis/analyze/{{prayerTranscriptionId}}/with-reference?reference_text=Our Father, who art in heaven"
          }
        },
        {
          "name": "Get Analysis by ID",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/analysis/{{analysisId}}"
          }
        }
      ]
    },
    {
      "name": "Bible & Prayers",
      "item": [
        {
          "name": "Get Random Bible Quote (EN)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/bible/random-quote?lang=en"
          }
        },
        {
          "name": "Get Random Bible Quote (PL)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/bible/random-quote?lang=pl"
          }
        },
        {
          "name": "Get Random Bible Quote (ES)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/bible/random-quote?lang=es"
          }
        },
        {
          "name": "Get Short Quote (EN)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/bible/short-quote?lang=en"
          }
        },
        {
          "name": "Get Short Quote (PL)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/bible/short-quote?lang=pl"
          }
        },
        {
          "name": "Get Daily Reading (EN)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/bible/daily-reading?lang=en"
          }
        },
        {
          "name": "Get Daily Reading (PL)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/bible/daily-reading?lang=pl"
          }
        },
        {
          "name": "List Bible Books (EN)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/bible/books?lang=en"
          }
        },
        {
          "name": "List Bible Books (PL)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/bible/books?lang=pl"
          }
        },
        {
          "name": "Get Bible Chapter",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/bible/chapter?book=John&chapter=3&lang=en"
          }
        },
        {
          "name": "List Available Prayers (EN)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/bible/prayers?lang=en"
          }
        },
        {
          "name": "List Available Prayers (PL)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/bible/prayers?lang=pl"
          }
        },
        {
          "name": "Get Prayer by ID (EN)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/bible/prayer/our_father?lang=en"
          }
        },
        {
          "name": "Get Prayer by ID (PL)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/bible/prayer/our_father?lang=pl"
          }
        }
      ]
    },
    {
      "name": "Tokens",
      "item": [
        {
          "name": "Get Token Balance",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/tokens/balance/{{userId}}"
          }
        },
        {
          "name": "Add Tokens (Admin)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"{{userId}}\",\n  \"amount\": 1000,\n  \"source\": \"admin:gift\",\n  \"description\": \"Welcome bonus\"\n}"
            },
            "url": "{{baseUrl}}/api/tokens/add"
          }
        },
        {
          "name": "Award Tokens for Prayer",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"{{userId}}\",\n  \"transcription_id\": \"{{prayerTranscriptionId}}\",\n  \"text_accuracy\": 0.85,\n  \"emotional_stability\": 0.75,\n  \"speech_fluency\": 0.90,\n  \"captcha_accuracy\": 0.80,\n  \"focus_score\": 0.88\n}"
            },
            "url": "{{baseUrl}}/api/tokens/award"
          }
        },
        {
          "name": "Get User Transactions",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/tokens/transactions/{{userId}}?skip=0&limit=20"
          }
        },
        {
          "name": "Get Leaderboard",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/tokens/leaderboard?limit=10"
          }
        }
      ]
    },
    {
      "name": "Charity",
      "item": [
        {
          "name": "List Charity Actions (EN)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/charity/actions?lang=en"
          }
        },
        {
          "name": "List Charity Actions (PL)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/charity/actions?lang=pl"
          }
        },
        {
          "name": "List Charity Actions (ES)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/charity/actions?lang=es"
          }
        },
        {
          "name": "Get Charity Action by ID (EN)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/charity/actions/{{charityId}}?lang=en"
          }
        },
        {
          "name": "Get Charity Action by ID (PL)",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/charity/actions/{{charityId}}?lang=pl"
          }
        },
        {
          "name": "Donate to Charity",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"{{userId}}\",\n  \"charity_id\": \"charity_001\",\n  \"tokens_amount\": 100\n}"
            },
            "url": "{{baseUrl}}/api/charity/donate"
          }
        },
        {
          "name": "Get User Donations",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/charity/donations/{{userId}}?skip=0&limit=20"
          }
        },
        {
          "name": "Get Charity Categories",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/charity/categories"
          }
        },
        {
          "name": "Get Overall Charity Stats",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/charity/stats"
          }
        },
        {
          "name": "Get Charity Action Stats",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/charity/actions/{{charityId}}/stats"
          }
        },
        {
          "name": "Get User Charity Stats",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/charity/user/{{userId}}/donations"
          }
        },
        {
          "name": "Get Charity Leaderboard",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/charity/leaderboard?limit=10"
          }
        },
        {
          "name": "Get Charity Donors",
          "request": {
            "method": "GET",
            "url": "{{baseUrl}}/api/charity/actions/{{charityId}}/donors?limit=50"
          }
        }
      ]
    }
  ]
}