{
  "info": {
    "name": "Praychain API",
    "description": "Complete API collection for Praychain - Prayer transcription and charity token system",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "2.0.0"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "test_user_123",
      "type": "string"
    },
    {
      "key": "prayerTranscriptionId",
      "value": "",
      "type": "string"
    },
    {
      "key": "captchaTranscriptionId",
      "value": "",
      "type": "string"
    },
    {
      "key": "analysisId",
      "value": "",
      "type": "string"
    },
    {
      "key": "charityId",
      "value": "charity_001",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "item": [
        {
          "name": "Root",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/",
              "host": ["{{baseUrl}}"],
              "path": [""]
            }
          },
          "response": []
        },
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          },
          "response": []
        },
        {
          "name": "API Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/health",
              "host": ["{{baseUrl}}"],
              "path": ["api", "health"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Transcription",
      "item": [
        {
          "name": "Transcribe Prayer Audio",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('prayerTranscriptionId', jsonData.transcription.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/prayer_audio.mp3"
                },
                {
                  "key": "audio_type",
                  "value": "prayer",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/transcribe",
              "host": ["{{baseUrl}}"],
              "path": ["api", "transcribe"]
            },
            "description": "Upload prayer audio file for transcription"
          },
          "response": []
        },
        {
          "name": "Transcribe Captcha Audio",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('captchaTranscriptionId', jsonData.transcription.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/captcha_audio.mp3"
                },
                {
                  "key": "audio_type",
                  "value": "captcha",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/transcribe",
              "host": ["{{baseUrl}}"],
              "path": ["api", "transcribe"]
            },
            "description": "Upload captcha audio file for transcription"
          },
          "response": []
        },
        {
          "name": "Get Transcription by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/transcriptions/{{prayerTranscriptionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "transcriptions", "{{prayerTranscriptionId}}"]
            }
          },
          "response": []
        },
        {
          "name": "List Transcriptions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/transcriptions?skip=0&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "transcriptions"],
              "query": [
                {
                  "key": "skip",
                  "value": "0"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Change Whisper Model",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/change-model?model_name=base",
              "host": ["{{baseUrl}}"],
              "path": ["api", "change-model"],
              "query": [
                {
                  "key": "model_name",
                  "value": "base",
                  "description": "Options: tiny, base, small, medium, large"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Analysis",
      "item": [
        {
          "name": "Analyze Transcription with Reference",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('analysisId', jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/analysis/analyze/{{prayerTranscriptionId}}/with-reference?reference_text=Our Father, who art in heaven&user_id={{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "analysis", "analyze", "{{prayerTranscriptionId}}", "with-reference"],
              "query": [
                {
                  "key": "reference_text",
                  "value": "Our Father, who art in heaven"
                },
                {
                  "key": "user_id",
                  "value": "{{userId}}"
                }
              ]
            },
            "description": "Analyze transcription with reference text"
          },
          "response": []
        },
        {
          "name": "Get Analysis by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/analysis/{{analysisId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "analysis", "{{analysisId}}"]
            }
          },
          "response": []
        },
        {
          "name": "List Analyses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/analysis?skip=0&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "analysis"],
              "query": [
                {
                  "key": "skip",
                  "value": "0"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Bible",
      "item": [
        {
          "name": "Get Random Quote",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/bible/random-quote",
              "host": ["{{baseUrl}}"],
              "path": ["api", "bible", "random-quote"]
            }
          },
          "response": []
        },
        {
          "name": "Get Short Quote",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/bible/short-quote",
              "host": ["{{baseUrl}}"],
              "path": ["api", "bible", "short-quote"]
            },
            "description": "Get a short inspirational Bible quote"
          },
          "response": []
        },
        {
          "name": "Get Prayer by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/bible/prayer/our_father",
              "host": ["{{baseUrl}}"],
              "path": ["api", "bible", "prayer", "our_father"]
            },
            "description": "Get a specific prayer (our_father, hail_mary, glory_be, apostles_creed)"
          },
          "response": []
        },
        {
          "name": "List All Prayers",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/bible/prayers",
              "host": ["{{baseUrl}}"],
              "path": ["api", "bible", "prayers"]
            },
            "description": "Get list of all available prayers"
          },
          "response": []
        },
        {
          "name": "Get Specific Verse",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/bible/verse/John 3:16",
              "host": ["{{baseUrl}}"],
              "path": ["api", "bible", "verse", "John 3:16"]
            },
            "description": "Get a specific Bible verse by reference"
          },
          "response": []
        },
        {
          "name": "Get Daily Reading",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/bible/daily-reading",
              "host": ["{{baseUrl}}"],
              "path": ["api", "bible", "daily-reading"]
            },
            "description": "Get today's Bible reading"
          },
          "response": []
        },
        {
          "name": "Read Bible Passage",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/bible/read?book=Genesis&chapter=1&verses=1-5",
              "host": ["{{baseUrl}}"],
              "path": ["api", "bible", "read"],
              "query": [
                {
                  "key": "book",
                  "value": "Genesis"
                },
                {
                  "key": "chapter",
                  "value": "1"
                },
                {
                  "key": "verses",
                  "value": "1-5"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "List Bible Books",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/bible/books",
              "host": ["{{baseUrl}}"],
              "path": ["api", "bible", "books"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Prayer",
      "item": [
        {
          "name": "üÜï Analyze Dual Recording (Prayer + Captcha)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prayer_transcription_id\": \"{{prayerTranscriptionId}}\",\n  \"captcha_transcription_id\": \"{{captchaTranscriptionId}}\",\n  \"bible_text\": \"Our Father, who art in heaven, hallowed be thy name; thy kingdom come; thy will be done on earth as it is in heaven.\",\n  \"captcha_text\": \"rainbow sunset mountain\",\n  \"user_id\": \"{{userId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/prayer/analyze-dual",
              "host": ["{{baseUrl}}"],
              "path": ["api", "prayer", "analyze-dual"]
            },
            "description": "‚úÖ NEW: Analyze two separate recordings - prayer and captcha. Awards tokens automatically (0-100 based on quality). CAPTCHA must be 50%+ accurate to earn tokens."
          },
          "response": []
        },
        {
          "name": "Analyze Prayer (Legacy - Single Recording)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"bible_text\": \"Our Father, who art in heaven, hallowed be thy name\",\n  \"captcha_text\": \"rainbow sunset mountain\",\n  \"user_id\": \"{{userId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/prayer/analyze/{{prayerTranscriptionId}}?bible_reference=Matthew 6:9",
              "host": ["{{baseUrl}}"],
              "path": ["api", "prayer", "analyze", "{{prayerTranscriptionId}}"],
              "query": [
                {
                  "key": "bible_reference",
                  "value": "Matthew 6:9"
                }
              ]
            },
            "description": "‚ö†Ô∏è LEGACY: Old version for single recording (prayer + captcha together)"
          },
          "response": []
        },
        {
          "name": "Get Prayer History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/prayer/history?skip=0&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "prayer", "history"],
              "query": [
                {
                  "key": "skip",
                  "value": "0"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Prayer Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/prayer/stats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "prayer", "stats"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Tokens",
      "item": [
        {
          "name": "Get Token Balance",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tokens/balance/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tokens", "balance", "{{userId}}"]
            },
            "description": "Get current token balance for a user"
          },
          "response": []
        },
        {
          "name": "üéÅ ADMIN: Give Tokens to User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"{{userId}}\",\n  \"amount\": 1000,\n  \"source\": \"admin:gift\",\n  \"description\": \"Welcome bonus - 1000 tokens!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/tokens/add",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tokens", "add"]
            },
            "description": "üîë ADMIN ONLY: Manually add tokens to any user account"
          },
          "response": []
        },
        {
          "name": "üéØ Award Tokens for Prayer (Manual)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"{{userId}}\",\n  \"transcription_id\": \"{{prayerTranscriptionId}}\",\n  \"text_accuracy\": 0.85,\n  \"emotional_stability\": 0.75,\n  \"speech_fluency\": 0.90,\n  \"captcha_accuracy\": 0.80,\n  \"focus_score\": 0.88\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/tokens/award",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tokens", "award"]
            },
            "description": "‚ö†Ô∏è Manual endpoint - normally called automatically by /prayer/analyze-dual. Awards 0-100 tokens. CAPTCHA must be 50%+ to earn tokens."
          },
          "response": []
        },
        {
          "name": "Get Transactions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tokens/transactions/{{userId}}?skip=0&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tokens", "transactions", "{{userId}}"],
              "query": [
                {
                  "key": "skip",
                  "value": "0"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "Get transaction history for a user"
          },
          "response": []
        },
        {
          "name": "Get Leaderboard",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tokens/leaderboard?limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tokens", "leaderboard"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Get top token earners"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Charity",
      "item": [
        {
          "name": "List Charity Actions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/charity/actions",
              "host": ["{{baseUrl}}"],
              "path": ["api", "charity", "actions"]
            },
            "description": "Get list of all active charity actions"
          },
          "response": []
        },
        {
          "name": "Get Charity Action by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/charity/actions/{{charityId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "charity", "actions", "{{charityId}}"]
            },
            "description": "Get details of a specific charity action"
          },
          "response": []
        },
        {
          "name": "üí∞ Donate Tokens to Charity",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"{{userId}}\",\n  \"charity_id\": \"charity_001\",\n  \"tokens_amount\": 100\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/charity/donate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "charity", "donate"]
            },
            "description": "Donate tokens to a charity. Deducts from user balance and updates charity stats."
          },
          "response": []
        },
        {
          "name": "Get User Donations History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/charity/donations/{{userId}}?skip=0&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["api", "charity", "donations", "{{userId}}"],
              "query": [
                {
                  "key": "skip",
                  "value": "0"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "‚ö†Ô∏è LEGACY: Use /user/{user_id}/donations instead"
          },
          "response": []
        },
        {
          "name": "Get User Charity Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/charity/user/{{userId}}/donations",
              "host": ["{{baseUrl}}"],
              "path": ["api", "charity", "user", "{{userId}}", "donations"]
            },
            "description": "‚úÖ Get user donation stats: total donated, charities supported, breakdown"
          },
          "response": []
        },
        {
          "name": "Get Charity Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/charity/actions/{{charityId}}/stats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "charity", "actions", "{{charityId}}", "stats"]
            },
            "description": "Get stats for specific charity: total raised, supporters, recent donations"
          },
          "response": []
        },
        {
          "name": "Get Charity Categories",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/charity/categories",
              "host": ["{{baseUrl}}"],
              "path": ["api", "charity", "categories"]
            },
            "description": "Get list of all charity categories"
          },
          "response": []
        },
        {
          "name": "Get Overall Charity Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/charity/stats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "charity", "stats"]
            },
            "description": "Get overall charity statistics across all actions"
          },
          "response": []
        },
        {
          "name": "Get Charity Leaderboard",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/charity/leaderboard?limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "charity", "leaderboard"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Get top charities by tokens raised and supporters"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üéØ Complete Workflow",
      "item": [
        {
          "name": "1. Upload Prayer Audio",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('prayerTranscriptionId', jsonData.transcription.id);",
                  "    console.log('‚úÖ Prayer transcription ID saved:', jsonData.transcription.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/prayer.mp3"
                },
                {
                  "key": "audio_type",
                  "value": "prayer",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/transcribe",
              "host": ["{{baseUrl}}"],
              "path": ["api", "transcribe"]
            }
          },
          "response": []
        },
        {
          "name": "2. Upload Captcha Audio",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('captchaTranscriptionId', jsonData.transcription.id);",
                  "    console.log('‚úÖ Captcha transcription ID saved:', jsonData.transcription.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/path/to/captcha.mp3"
                },
                {
                  "key": "audio_type",
                  "value": "captcha",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/transcribe",
              "host": ["{{baseUrl}}"],
              "path": ["api", "transcribe"]
            }
          },
          "response": []
        },
        {
          "name": "3. Analyze & Award Tokens",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prayer_transcription_id\": \"{{prayerTranscriptionId}}\",\n  \"captcha_transcription_id\": \"{{captchaTranscriptionId}}\",\n  \"bible_text\": \"Our Father, who art in heaven, hallowed be thy name; thy kingdom come; thy will be done on earth as it is in heaven.\",\n  \"captcha_text\": \"rainbow sunset mountain\",\n  \"user_id\": \"{{userId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/prayer/analyze-dual",
              "host": ["{{baseUrl}}"],
              "path": ["api", "prayer", "analyze-dual"]
            }
          },
          "response": []
        },
        {
          "name": "4. Check Balance",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tokens/balance/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tokens", "balance", "{{userId}}"]
            }
          },
          "response": []
        },
        {
          "name": "5. Donate to Charity",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"{{userId}}\",\n  \"charity_id\": \"charity_001\",\n  \"tokens_amount\": 50\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/charity/donate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "charity", "donate"]
            }
          },
          "response": []
        }
      ]
    }
  ]
}